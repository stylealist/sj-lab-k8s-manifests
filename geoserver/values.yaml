#test
image:
  #repository: kartoza/geoserver
  repository: docker.osgeo.org/geoserver
  tag: 2.25.0
  #tag: 2.24.0
  pullPolicy: IfNotPresent

service:
  type: NodePort
  port: 8080
  nodePort: 32180  # 로컬 NGINX에서 reverse proxy할 노드포트 번호

resources: {}

persistence:
  enabled: false
  #storageClass: "manual"
  #accessMode: ReadWriteOnce
  #size: 5Gi

# 호스트 경로(노드) ↔ 컨테이너 데이터 디렉터리 연결
hostPath:
  enabled: true
  path: /home/kuber-volume/geoserver-workspace  # 로컬 호스트 경로

# 컨테이너 내부 데이터 디렉터리 경로
dataDir:
  mountPath: /opt/geoserver_data

env:
  - name: PROXY_BASE_URL
    value: https://geoserver.sj-lab.co.kr/geoserver
  - name: TZ
    value: "Asia/Seoul"
  - name: JAVA_TOOL_OPTIONS
    value: "-Duser.timezone=Asia/Seoul"
  - name: GEOSERVER_CSRF_WHITELIST
    value: "geoserver.sj-lab.co.kr"

# web.xml 영구화(볼륨) 설정
webXml:
  enabled: true
  # 컨테이너 내 WEB-INF 경로(GeoServer Jetty 이미지 기본값)
  mountDir: /opt/geoserver/webapps/geoserver/WEB-INF

  # 호스트 경로로 영구화 (또는 아래 pvc 사용)
  hostPath:
    enabled: true
    path: /home/kuber-volume/geoserver-webinf  # 호스트에 보관할 위치

  pvc:
    enabled: false
    claimName: ""        # pvc 쓸 경우 이름 지정
